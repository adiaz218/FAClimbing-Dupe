<!DOCTYPE html>
<html>
    <head>
        <title>First Ascent Climbing - Login</title>
        <style>
            /* First Ascent Color Palette (inspired by faclimbing.com) */
            :root {
                --fa-dark-teal: #004D60; /* Main brand color */
                --fa-orange-accent: #FF6B00; /* Accent color, buttons */
                --fa-text-dark: #333333;
                --fa-background-light: #F8F8F8; /* Light gray background */
                --fa-white: #FFFFFF;
                --fa-border-light: #CCCCCC;
            }

            body {
                font-family: 'Open Sans', sans-serif; /* A common, clean font similar to their site */
                margin: 0;
                padding: 20px;
                background-color: var(--fa-background-light);
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
                color: var(--fa-text-dark);
            }

            .login-container {
                background-color: var(--fa-white);
                padding: 40px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                text-align: center;
                width: 100%;
                max-width: 400px;
            }

            .logo-container img {
                max-width: 150px; /* Adjust size as needed */
                height: auto;
                margin-bottom: 25px;
            }

            h2 {
                color: var(--fa-dark-teal); /* First Ascent dark teal for the title */
                margin-bottom: 20px;
                font-size: 2em;
                font-weight: 700;
            }

            p {
                margin-bottom: 20px;
                line-height: 1.5;
            }

            input[type="tel"],
            input[type="text"] {
                width: calc(100% - 24px); /* Account for padding and border */
                padding: 12px;
                margin-bottom: 15px;
                border: 1px solid var(--fa-border-light);
                border-radius: 4px;
                font-size: 1em;
                color: var(--fa-text-dark);
            }

            button {
                background-color: var(--fa-orange-accent); /* First Ascent orange for primary actions */
                color: var(--fa-white);
                padding: 12px 20px;
                border: none;
                border-radius: 4px;
                font-size: 1.1em;
                cursor: pointer;
                transition: background-color 0.3s ease, transform 0.1s ease;
                width: 100%;
                margin-bottom: 10px;
            }

            button:hover {
                background-color: #e55a00; /* Slightly darker orange on hover */
                transform: translateY(-1px);
            }

            button:active {
                transform: translateY(0);
            }

            #authStatus {
                margin-top: 15px;
                color: var(--fa-text-dark);
                font-size: 0.9em;
                min-height: 1.5em; /* Prevent layout shift */
            }

            #recaptcha-container {
                margin-top: 20px;
                margin-bottom: 20px;
                display: flex;
                justify-content: center;
            }

            /* UI Visibility (from previous step) */
            #auth-section { display: block; }
            #app-section { display: none; }
            #auth-section.hidden { display: none; }
            #app-section.visible { display: block; }

            /* App Section Styling (optional, feel free to customize) */
            #app-section {
                background-color: var(--fa-white);
                padding: 30px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                max-width: 800px;
                width: 100%;
                margin: 20px auto;
            }
            #app-section h1 { color: var(--fa-dark-teal); font-size: 2.2em; margin-bottom: 20px;}
            #user-info { border: 1px solid var(--fa-border-light); padding: 20px; border-radius: 5px; margin-top: 20px; background-color: var(--fa-background-light); }
            #user-info h3 { color: var(--fa-orange-accent); margin-top: 0; }
            #app-section button { background-color: var(--fa-dark-teal); margin-top: 15px; width: auto; padding: 10px 25px; display: inline-block; margin-right: 10px;}
            #app-section button:hover { background-color: #003a49; } /* Darker teal on hover */

        </style>
        <!-- Google Fonts - Open Sans (similar to their site font) -->
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
    </head>
    <body>
        <!-- Authentication Section -->
        <div id="auth-section">
            <div class="login-container">
                <div class="logo-container">
                    <img src="FA-foundation.png" alt="First Ascent Climbing Logo">
                </div>
                <h2>First Ascent Climbing and Fitness</h2>
                <p>Sign in with your phone number to access your account.</p>

                <div id="recaptcha-container"></div>
                <input type="tel" id="phoneNumber" placeholder="Enter phone number (e.g., +11234567890)">
                <button id="sendCode">Send Verification Code</button>

                <input type="text" id="verificationCode" placeholder="Enter verification code">
                <button id="verifyCode">Verify Code</button>

                <p id="authStatus"></p>
            </div>
        </div>

        <!-- Application Section (your existing app content) -->
        <div id="app-section">
            <h1>Welcome to First Ascent!</h1>
            <div id="user-info">
                <h3>Your Profile</h3>
                <p><strong>Display Name:</strong> <span id="userDisplayName"></span></p>
                <p><strong>Phone:</strong> <span id="userPhoneNumber"></span></p>
                <p><strong>Loyalty Points:</strong> <span id="userLoyaltyPoints"></span></p>
                <p><strong>Membership Status:</strong> <span id="userMembershipStatus"></span> (<span id="userMembershipType"></span>)</p>
                <p><strong>Home Gym:</strong> <span id="userHomeGym"></span></p>

                <h4>Choose Your Home Gym:</h4>
                <select id="homeGymSelect">
                    <option value="">-- Select a Gym --</option>
                </select>
                <button id="saveHomeGymButton">Save Home Gym</button>
                <p id="homeGymStatus"></p>
            </div>

            <button id="logoutButton">Log Out</button>
            <button id="updatePointsButton">Add 10 Loyalty Points</button>
        </div>

        <!-- Firebase Initialization Script -->
        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
            import { getAuth } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";
            import { getFirestore } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";
            import { getStorage } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-storage.js";

            const firebaseConfig = {
                apiKey: "AIzaSyB-ldg94e902HITajU_898U5XVmxw0lOFY",
                authDomain: "faapp-ddcff.firebaseapp.com",
                projectId: "faapp-ddcff",
                storageBucket: "faapp-ddcff.firebasestorage.app",
                messagingSenderId: "854580718964",
                appId: "1:854580718964:web:7177891b9489abdd311021",
                measurementId: "G-JC2Q2LEH8R"
            };

            const app = initializeApp(firebaseConfig);
            console.log("Firebase app initialized successfully:", app);

            window.auth = getAuth(app);
            window.firestore = getFirestore(app);
            window.storage = getStorage(app);
        </script>

        <!-- Your application logic modules -->
        <script type="module" src="./auth.js"></script>
        <script type="module" src="./firestore-users.js"></script>
    </body>
</html>
